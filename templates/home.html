{% extends "base.html" %}
{% block content %}

<div class="sidebar" style="width:25%;float:right;">
  <h3><a href="/event">Upcoming Events</a>
    <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#addEvent">
    +</button>
  </h3><br/>

  {% for event in current_events %}
  {{event.date.strftime("%m-%d-%Y")}}<br/>
  <a id="eventLink" href="/event/{{ event.event_id }}">{{ event.fname}}'s {{ event.event_name }}</a><br/><br/>
  {% endfor %}


<script src="http://unpkg.com/react/dist/react.js"></script>
<script src="http://unpkg.com/react-dom/dist/react-dom.js"></script>

<script src="http://unpkg.com/babel-standalone"></script>


   <script>

  // function getEvents() {

    
  // }


  // $("#eventLink").on("click", getEvents);
  // </script>




  <h3><a href="/contact">Contacts</a>
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">
    +</button></h3>
  <br/>
  {% for contact in user.contacts %}
    <a href="/contact/{{contact.contact_id}}">{{ contact.fname }} {{ contact.lname }}</a><br/>
  {% endfor %}
  <a href="#"><h3>Likes</h3></a><br/>
  {% for product in products %}
    
    <div style="display: inline-block; width: 200px; vertical-align: top;">
      <a href="/similar?product={{ product.present_id }}">
        <p>{{ product.present_name }}</p>
      </a>
      <img src="{{ product.img_url }}">
    </div>
  
  {% endfor %}
</div>





<form id="searchBox">
  <input type="text" name="name" id="textInput">
  <select name="category" id="catInput">
    {% for cat in category_list %}
    <option value="{{ cat }}">{{ cat }}</option>
    {% endfor %}
  </select>
  <input type="submit" value="Search">
</form>
<br/><br/>


<div id="searchResults">

</div>



<script>

function showResults(results) {
  $("#searchResults").html("<h3>Search Results</h3>")
  var data = results.data;

  data.forEach(function(product) {
    $("#searchResults").append("<div style='display: inline-block; width: 200px; vertical-align: top;'><p>" + product["title"]+ "</p><img src=" + product["img_url"] + "></div>");
  });
  
}

function getResults(evt) {
  evt.preventDefault();

  var searchInputs = {
    "text": $("#textInput").val(),
    "cat": $("#catInput").val()
  };

  $.get("/search.json", searchInputs, showResults);


}

$("#searchBox").on("submit", getResults);

</script>









<div id="addEvent" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Add Event</h4>
      </div>
      <div class="modal-body">
        <form action="/add-event" method="POST">
          Contact: <select name="contact_id">

          {% for contact in user.contacts %}
          <option value= {{ contact.contact_id }}>{{ contact.fname }} {{ contact.lname}}</option>
          {% endfor %}
          </select><br/>
          Event Name: <input type="text" name="ename"><br/>
          Date: <input type="text" name="date"><br/>
          <input type="submit" value="Add">
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>





<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Add Contact</h4>
      </div>
      <div class="modal-body">
        <form action="/add-contact" method="POST">
  First Name: <input type="text" name="fname">
  Last Name: <input type="text" name="lname">
  <input type="submit" value="Add">
</form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>



{% endblock %}