{% extends "base.html" %}
{% block content %}

<table>
  <tr>
    <td>
      <h4>Event Details <button type="button" class="btn btn-info" data-toggle="modal" data-target="#editEvent">
      Edit Event</button></h4>
    </td>
  </tr>
  <tr>
    <td>
      <a href="/contact/{{ event.contact.contact_id }}">{{ event.contact.fname }} {{ event.contact.lname }}'s</a> {{ event.event_name }} {{event.date.strftime("- %A, %B %d, %Y")}}
    </td>
  </tr>
  <tr>
    <td>

      {% if selected %}

      <h4>Selected Presents</h4>

      {% for present in selected %}
      
        <div style="display: inline-block; width: 200px; vertical-align: top;">
          <a href="/product-details/{{ present.Present.present_id }}?event_id={{ event.event_id }}">
          <p>{{ present.Present.present_name }}</p>
          </a>
          <img src="{{ present.Present.img_url }}">
        </div>

      {% endfor %}

      {% endif %}
    </td>
  </tr>
  <tr>
    <td>

      {% if past %}

      <h4>Past Presents</h4>

      {% for present in past %}
          
        <div style="display: inline-block; width: 200px; vertical-align: top;">
          <a href="/product-details/{{ present.Present.present_id }}?event_id={{ event.event_id }}">
            <p>{{ present.Present.present_name }}</p>
            </a>
            <img src="{{ present.Present.img_url }}">

        </div>

      {% endfor %}

      {% endif %}
    </td>
  </tr>
  <tr>
    <td>

      {% if bookmarked %}
      <h4>Bookmarked Presents</h4>

      {% for present in bookmarked %}
          
        <div style="display: inline-block; width: 200px; vertical-align: top;">
          <a href="/product-details/{{ present.Present.present_id }}?event_id={{ event.event_id }}">
            <p>{{ present.Present.present_name }}</p>
            </a>
            <img src="{{ present.Present.img_url }}">
        </div>
        
      {% endfor %}

      {% endif %}
    </td>
  </tr>
  <tr>
    <td>

      {% if product_list %}

      <h4>Suggested Presents</h4>

      {% for products in product_list %}
      {% set count = loop.index %}
        <h4>{{products[0]}} <button id="product-button{{ count }}">See All</button></h4>
      
          {% for product in products[1] %}

          <div class="myImage{{ count }}" style="display: inline-block; width: 200px; vertical-align: top;">
            <form action="/bookmark" method="POST">
              <input type="hidden" name="product_id" value="{{ product["id"] }}">
              <input type="hidden" name="event_id" value="{{ event.event_id}}">
              <input type="hidden" name="status_name" value="bookmarked">
              <input type="submit" value="Bookmark">
            </form>
            <a href="/product-details/{{ product["id"] }}?event_id={{ event.event_id }}">
              <p>{{ product["title"] }}</p>
            </a>
            <img src="{{ product.img_url }}">

          </div>
         
          {% endfor %}
          
          <br/><br/>
        
      {% endfor %}

      {% endif %}
    </td>
  </tr>
</table>

<script>

  $(document).ready(function() {

    for (var i=1; i <= {{ product_size|safe }}; i++) {
  $('.myImage' + i).slice(5).hide();
}
});

function openButton(j) {
  $("#product-button" + j).on("click", function() {
  $(".myImage" + j ).fadeIn().slideDown(1000);

});
}

for (var i=1; i<= {{ product_size|safe }}; i++) {
  openButton(i);
}

</script>




<div id="editEvent" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Edit Event For {{ event.contact.fname }} {{ event.contact.lname }}</h4>
      </div>
      <div class="modal-body">
        <form action="/edit-event" method="POST">
          
          Event Name: <input type="text" name="ename" value="{{ event.event_name }}"><br/>
          Date: <input type="date" name="date" value="{{ event.date }}"><br/>
          <input type="hidden" name="event_id" value="{{ event.event_id }}">
          <input type="submit" value="Update">
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


{% endblock %}